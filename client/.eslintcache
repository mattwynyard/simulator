[{"S:\\Simulator\\Map\\client\\src\\index.js":"1","S:\\Simulator\\Map\\client\\src\\reportWebVitals.js":"2","S:\\Simulator\\Map\\client\\src\\App.js":"3"},{"size":500,"mtime":499162500000,"results":"4","hashOfConfig":"5"},{"size":362,"mtime":499162500000,"results":"6","hashOfConfig":"5"},{"size":4118,"mtime":1619133265464,"results":"7","hashOfConfig":"5"},{"filePath":"8","messages":"9","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1dc9rqr",{"filePath":"10","messages":"11","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"12","messages":"13","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"14"},"S:\\Simulator\\Map\\client\\src\\index.js",[],"S:\\Simulator\\Map\\client\\src\\reportWebVitals.js",[],"S:\\Simulator\\Map\\client\\src\\App.js",["15","16","17"],"import './App.css';\r\nimport { MapContainer, TileLayer, CircleMarker, ScaleControl, useMap} from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport React, { useState, useEffect} from 'react';\r\n\r\nfunction MapRef(props) {\r\n\r\n  const [center, setCenter] = useState(props.center);\r\n  const map = useMap();\r\n  if (props.center.length !== 0) {\r\n    console.log(props.center);\r\n    map.panTo(props.center[0])\r\n  }\r\n  \r\n  \r\n  return null\r\n}\r\n\r\nfunction App() {\r\n\r\n  const [counter, setCounter] = useState(0);\r\n  const [position, setPosition] = useState([]);\r\n  const [center] = useState([-36.81835, 174.74581]);\r\n  const [points, setPoints] = useState([]);\r\n  const [host] = useState(\"localhost:5000\");\r\n  const [timerInterval] = useState(1000);\r\n\r\n  const getData = async () => {      \r\n    try {\r\n        const response = await fetch(\"http://\" + host + '/position', {\r\n            method: 'GET',\r\n            credentials: 'same-origin',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',        \r\n            },\r\n           \r\n        });\r\n        if (response.ok) {\r\n            const body = await response.json();\r\n            return body; \r\n        } else {\r\n            \r\n            return Error(response);\r\n        }\r\n    } catch {\r\n        return new Error(\"connection error\")\r\n    }      \r\n  };\r\n\r\n  useEffect(\r\n    () => {\r\n        const id = setInterval(() => {\r\n        setCounter(counter + 1); \r\n        getData().then(data => {\r\n            if (data.latlng !== null) {\r\n              try {\r\n                let lat = data.latlng[0];\r\n                let lng = data.latlng[1];\r\n                setPosition([L.latLng(lat, lng)]);     \r\n              } catch {\r\n                console.log(\"position error\");\r\n              }     \r\n            }\r\n            try {\r\n              if (data.faults !== null) {\r\n                //console.log(data.faults);\r\n                setPoints(data.faults);\r\n              }\r\n            } catch {\r\n              console.log(\"fault error\")\r\n            }     \r\n        });           \r\n        }, timerInterval);\r\n        return () => {\r\n        clearInterval(id);\r\n        };\r\n    },\r\n    [counter, getData, timerInterval],\r\n);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n       <MapContainer \r\n            className=\"map\" \r\n            center={center} \r\n            zoom={18} \r\n            minZoom={1}\r\n            maxZoom={18}\r\n            scrollWheelZoom={true}\r\n            keyboard={true}\r\n            \r\n            eventHandlers={{\r\n                load: () => {\r\n                  console.log('onload')\r\n                },\r\n              }}\r\n        >\r\n        <TileLayer\r\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          //url=\"http://localhost:5000/auckland/{z}/{x}/{y}.png\"\r\n        />\r\n         <ScaleControl name=\"Scale\" className=\"scale\"/>\r\n         {position.map((position, idx) =>\r\n            <CircleMarker\r\n              key={`marker-${idx}`} \r\n              center={position}\r\n              radius ={5}\r\n              fill={true}\r\n              fillOpacity={1.0}\r\n              eventHandlers={{\r\n                click: () => {\r\n                  console.log('marker clicked')\r\n                },\r\n              }}\r\n              >        \r\n            </CircleMarker>\r\n          )}\r\n          \r\n          {points.map((position, idx) =>\r\n            <CircleMarker\r\n              key={`marker-${idx}`} \r\n              center={L.latLng(position.LatLng[0], position.LatLng[1])}\r\n              radius ={4}\r\n              fill={true}\r\n              color={\"red\"}\r\n              fillOpacity={1.0}\r\n              eventHandlers={{\r\n                click: () => {\r\n                  console.log('marker clicked')\r\n                },\r\n              }}\r\n              >        \r\n            </CircleMarker>\r\n          )} \r\n          <MapRef center={position}></MapRef>\r\n         </MapContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n",{"ruleId":"18","severity":1,"message":"19","line":9,"column":10,"nodeType":"20","messageId":"21","endLine":9,"endColumn":16},{"ruleId":"18","severity":1,"message":"22","line":9,"column":18,"nodeType":"20","messageId":"21","endLine":9,"endColumn":27},{"ruleId":"23","severity":1,"message":"24","line":29,"column":9,"nodeType":"25","endLine":50,"endColumn":4},"no-unused-vars","'center' is assigned a value but never used.","Identifier","unusedVar","'setCenter' is assigned a value but never used.","react-hooks/exhaustive-deps","The 'getData' function makes the dependencies of useEffect Hook (at line 80) change on every render. Move it inside the useEffect callback. Alternatively, wrap the definition of 'getData' in its own useCallback() Hook.","VariableDeclarator"]